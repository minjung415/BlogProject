<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Minlog</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}">
</head>
<body>
<div class="container">
    <header class="header">
        <div class="header-content">
            <h1 class="logo"><a th:href="@{/minlog}">Minlog</a></h1>
            <nav class="nav">
                <div sec:authorize="isAnonymous()">
                    <a th:href="@{/minlog/loginform}" class="nav-link">로그인</a>
                </div>
                <div sec:authorize="isAuthenticated()">
                    <a href="/minlog/postform" class="nav-link">글 쓰기</a>
                    <a href="/minlog/mypage" class="nav-link">마이페이지</a>
                    <a href="/logout" class="nav-link">로그아웃</a>
                </div>
            </nav>
        </div>
    </header>
    <div class="post-list-container">
        <h2>Post List</h2>
        <div class="post-list" th:if="${!posts.isEmpty()}">
            <div class="post-item" th:each="post : ${posts}">
                <div class="post-title">
                    <a th:href="@{/minlog/viewpost/{id}(id=${post.id})}" th:text="${post.title}"></a>
                </div>
                <div class="post-details">
                    <div class="post-user">
                        <span>Writed By
                        <a th:href="@{/minlog/profile/{username}(username=${post.user.username})}" th:text="${post.user.username}"></a>
                        </span>
                    </div>
                    <p class="post-date" th:text="${post.createdAt.format(dateformatter)}"></p>
                </div>
            </div>
        </div>
<!--    <div class="post-list-container">-->
<!--        <h3>게시글 목록</h3>-->
<!--        <table th:if="${!posts.isEmpty()}">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th>제목</th>-->
<!--                <th>작성자</th>-->
<!--                <th>작성일</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr th:each="post : ${posts}">-->
<!--                <td>-->
<!--                    <a th:href="@{/minlog/viewpost/{id}(id=${post.id})}" th:text="${post.title}"></a>-->
<!--                </td>-->
<!--                <td>-->
<!--                    <a th:href="@{/minlog/{username}(username=${post.getUser().getUsername()})}" th:text="${post.getUser().username}"></a>-->
<!--                </td>-->
<!--                <td th:text="${post.createdAt.format(dateformatter)}"></td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->
        <div th:if="${posts.isEmpty()}">
            <p>게시물이 없습니다.</p>
        </div>
    </div>
</div>
</body>
</html>